

## 3.1.고등 운영체제

>  **폰노이만 구조**
>
> 폰노이만 구조는 하나의 CPU(프로세서)와 하나의 memory가 bus를 통해 연결되어 있는 운영체제 구조이다.

고등 운영체제는 폰노이만 구조에서 발전된 구조의 운영체제를 말한다.

고등 운영체제가 만들어 지게 된 이유는 다음과 같다.
 1. 성능향상 (Performance)
 2. 비용(Cost) : 하나의 강한 CPU보다 약한 여러개의 CPU가 더욱 경제적이다.
 3. 신뢰성(Realiability) : 한 CPU가 고장나더라도, 다른 CPU가 동작하고 있다.

다중 프로세스 시스템, 분산 시스템, 실시간 시스템은 고등 운영체제에 속한다.

### 3.1.1 다중 프로세스 시스템(Multi Process System) 

여러개의 process와 하나의 memory가 존재하는 구조이다. ( = 병렬 시스템, 강결합 시스템)

<img src="/Users/DaeHyeon/Library/Application Support/typora-user-images/스크린샷 2020-02-23 오후 5.30.23.png" alt="스크린샷 2020-02-23 오후 5.30.23" style="zoom:33%;" />

1. 속도: 연산역활을 하는 CPU가 많아졌으니 성능향상

2. 비용: 3GHz CPU 하나가 30만원이라면, 1.5GHz CPU는 3만원이다. 성능은 절반인데 가격은 1/10이다. 그래서 좋은 CPU하나보다 더 안좋은 CPU여러개 쓰는게 가성비가 더 좋다.

3. 안정성: CPU하나가 고장나도 다른 CPU가 있으니까 더 안정적이다.

4. 각각의 cpu가 여러개의 usr program이 동작하는 것처럼 보이는 것이 아닌 실제로 동작을 가능하게 한다. 



### 3.1.2 분산 시스템(Distributed System) 

하나의 process와 하나의 memory를 가지고 있는 여러 개의 컴퓨터가 근거리 통신망(LAN)을 통해 연결되어 하나의 common goal을 향해 일하는 시스템이다. (= multi computer system, 소결합 시스템)

<img src="/Users/DaeHyeon/Library/Application Support/typora-user-images/스크린샷 2020-02-23 오후 5.32.35.png" alt="스크린샷 2020-02-23 오후 5.32.35" style="zoom: 33%;" />

같은 LAN에 있는 여러대의 컴퓨터가 일을 나눠서 하는 시스템이다. 이것도 역시 이런 시스템에 맞는 운영체제가 필요하다. 서로 계속 일의 경과가 어디까지 진행됬는지 메세지를 주고 받아야 하기 때문이다. (각각의 컴퓨터가 하나의 일을 한다.)

### 실시간 시스템

- 실시간 시스템(Realtime System) : 어떤 계산이 deadline내에 반드시 끝나야 하는 시스템이다. 그리고 여기 쓰이는 운영체제를 RTOS(Real Time Operating System)라고 부른다. 이들은 주로 자율 주행 자동차, 네비게이션, 공장자동화, 군사 목적, 항공 우주의 분야에서 쓰인다.

 

## 인터럽트 기반 시스템

------

> Interrupt란 CPU의 정상적인 실행을 방해하는 것을 말한다. 운영체제는 평소에 대기상태이지만, Hardware Interrupt나 Software Interrupt에 의해서 실행되어지기 때문에 현대 운영체제는 인터럽트 기반의 시스템이라고 할 수 있다.



**그래서 인터럽트, 왜 하는거요?**
그 이유는 입출력 연산이 CPU 명령 수행속도보다 현저히 느리기 때문이다.

운영체제를 악덕 사장님, CPU를 비싼 월급 주고 데려온 고오급 인력이라고 생각해보자. 악덕 사장 입장에서는 비싼돈 들여온 만큼 고오급 인력이 쉬지않고 일해서 돈값을 했으면 좋겠다고 생각할 것이다.

그런데 아주 오래걸리는 입출력 연산(컴퓨터에 연결된 장치)을 CPU가 매번 기다린다면(월급루팡 한다면)...? 비싼 돈 주고 모셔온 CPU를 백분 활용하지 못해 운영체제 사장님은 환장할 지경.
CPU가 입출력 처리를 기다리며 쉬는 꼴을 못보는 사장님은 연산 결과가 나올 때 까지 다른 일을 시킨다. 우리 직원 뽕을 뽑아야하니까!
그리고 입출력 직원에게 자신의 업무가 완료되면 그때 CPU선배님에게 작업 완료를 알리라고 일러둔다. CPU가 다시 해당 작업도 이어서 할 수 있도록 한다.
여기서 입출력 직원이 CPU선배님에게 작업 완료를 알려주는 것이 `인터럽트`이다!

<img src="/Users/DaeHyeon/Library/Application Support/typora-user-images/스크린샷 2020-03-01 오후 5.22.35.png" alt="스크린샷 2020-03-01 오후 5.22.35" style="zoom:50%;" />

- Hardware Interrupt : 키보드나 마우스 등의 CPU외부의 Hardware에 의해 발생되는 Interrupt이다.

<img src="/Users/DaeHyeon/Library/Application Support/typora-user-images/스크린샷 2020-02-23 오후 5.46.41.png" alt="스크린샷 2020-02-23 오후 5.46.41" style="zoom:33%;" />

우리가 마우스를 움직이면 화면에 커서도 같이 따라 움직이는데, 이는 운영체제 안에 ISR이 작동하기 때문이다. 마우스 이벤트가 발생하면 운영체제는 하던일을 잠시 멈추고(혹은 하던일을 같이 하면서) 커서 움직이는 코드(ISR)을 실행한다. 구체적인 순서는 아래와 같다.

1. 마우스나 키보드를 쓴다
2. 전기적인 신호가 CPU에 전달된다
3. CPU는 운영체제한테 이벤트가 발생했다고 알린다
4. 운영체제는 해당 이벤트에 맞는 ISR을 실행시킨다





- Software Interrupt :  CPU 내부에서 명령을 실행하는 도중 Software에 의해 발생되는 Interrupt를 말한다.

1. 하드웨어 고장(Hardware Interrupt)
   - 컴퓨터 고장
   - 데이터 전달 과정에서의 비트 오류
   - 전원이 나간 경우
2. 실행할 수 없는 명령어 : 기억장치에서 인출한 명령어의 비트 패턴이 정의되어 있지 않은 경우
3. 명령어 실행 오류 : 나누기 0을 하는 경우
4. 사용 권한 위배 : 사용자가 운영체제만 사용할 수 있는 자원에 액세스하는 경우

<img src="/Users/DaeHyeon/Library/Application Support/typora-user-images/스크린샷 2020-02-23 오후 5.56.24.png" alt="스크린샷 2020-02-23 오후 5.56.24" style="zoom:50%;" />

 CPU가 A프로그램을 잘 실행하고 있다가 특정 파일을 읽어들여달라는 요청(SWI)을 받으면 CPU는 OS에게 그 이벤트를 전달하고 OS의 하드디스크 관련 ISR이 작동되면서 하드디스크에서 해당 파일을 찾아 A프로그램에게 돌려준다. 그리고 나서 CPU는 다시 아까 잠깐 멈춘대부터 다시 A프로그램을 실행한다. ***핵심은 A프로그램이 직접 하드디스크에 접근하는게 아니라, 이벤트를 발생시켜서 OS에게 대신 해달라고 부탁하는것이다.***



- 



